#!/bin/bash

exec su -c '/home/mhc/mhc-venv/bin/uwsgi --lazy-apps --manage-script-name --mount /partners=/home/mhc/mhc-backend/Backend/wsgi.py --enable-threads --virtualenv /home/mhc/mhc-venv --post-buffering 32768 --buffer-size 32768 -M --no-orphans --socket /home/mhc/run/mhc.sock --chmod-socket --processes {{ uwsgi_processes }} --max-requests {{ uwsgi_max_requests }} --reload-on-rss {{ uwsgi_reload_on_rss }} -t 60 --harakiri 1800 --logto /home/mhc/logs/mhc_uwsgi.log --logformat-strftime --log-date="%H:%M:%S" --log-format="[%(ftime)|%(tmsecs)|pid: %(pid)|from: %(var.HTTP_X_FORWARDED_FOR)|via: %(addr)|user: %(user_id)| %(method) %(uri)  |%(vars) vars in %(pktsize) bytes] => generated %(rsize) bytes in %(msecs) msecs (%(proto) %(status)) %(headers) headers in %(hsize) bytes (%(switches) switches on core %(core)) |accessed: %(accessed_user_id)"' - mhc
